(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{100:function(e,t,n){},125:function(e,t,n){"use strict";n.r(t);var r,a=n(3),c=n(0),s=n.n(c),o=n(26),u=n.n(o),i=n(83),l=n(11),b=n(73),j=(n(99),n(100),n(74)),p=n.n(j),d=n(27),f=function(e){return e.phoneBook.contacts},O=function(e){return e.phoneBook.filter},h=Object(d.a)([f,O],(function(e,t){return t?e.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})):e})),m=Object(d.a)(O,(function(e){return e})),x=Object(d.a)(f,(function(e){return e})),v=n(4),g=n.n(v),C=n(8),w=n(9),_=n(75),k=n.n(_).a.create({baseURL:"https://goit-phonebook-api.herokuapp.com"}),y=function(e){k.defaults.headers.common.Authorization=e},N=function(){var e=Object(C.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.get("/contacts");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(C.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.post("/contacts",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(C.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.delete("/contacts/".concat(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(C.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.post("/users/signup",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(C.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.post("/users/login",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(C.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.post("/users/logout");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(C.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.get("/users/current");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(e){y("Bearer ".concat(e))},A=function(){y("")},q=Object(w.c)("auth/register",function(){var e=Object(C.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I(t);case 3:return n=e.sent,r=n.data,z(r.token),e.abrupt("return",r);case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),M=Object(w.c)("auth/login",function(){var e=Object(C.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(t),e.next=4,L(t);case 4:return n=e.sent,r=n.data,z(r.token),e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()),B={register:q,logOut:Object(w.c)("auth/logout",Object(C.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R();case 3:A(),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})))),logIn:M,fetchCurrentUser:Object(w.c)("auth/refresh",function(){var e=Object(C.a)(g.a.mark((function e(t,n){var r,a,c,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState(),null!==(a=r.auth.token)){e.next=4;break}return e.abrupt("return",n.rejectWithValue());case 4:return z(a),e.prev=5,e.next=8,U();case 8:return c=e.sent,s=c.data,e.abrupt("return",s);case 13:e.prev=13,e.t0=e.catch(5);case 15:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}())},Z={getIsLoggedIn:function(e){return e.auth.isLoggedIn},getUsername:function(e){return e.auth.user.name},getIsFetchingCurrent:function(e){return e.auth.isFetchingCurrentUser}},E=n(6),D=Object(w.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingCurrentUser:!1},extraReducers:(r={},Object(E.a)(r,B.register.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(E.a)(r,B.logIn.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(E.a)(r,B.logOut.fulfilled,(function(e){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),Object(E.a)(r,B.fetchCurrentUser.pending,(function(e){e.isFetchingCurrentUser=!0})),Object(E.a)(r,B.fetchCurrentUser.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0,e.isFetchingCurrentUser=!1})),Object(E.a)(r,B.fetchCurrentUser.rejected,(function(e){e.isFetchingCurrentUser=!1})),r)}).reducer,H=Object(w.b)("phoneBook/filterContacts",(function(e){return{payload:e}})),J=Object(w.b)("contacts/getContactsRequest"),T=Object(w.b)("contacts/getContactsSuccess"),W=Object(w.b)("contacts/getContactsReject"),X=Object(w.b)("contacts/addContactRequest"),P=Object(w.b)("contacts/addContactSuccess"),$=Object(w.b)("contacts/addContactReject"),Q=Object(w.b)("contacts/deleteContactRequest"),V=Object(w.b)("contacts/deleteContactSuccess"),Y=Object(w.b)("contacts/deleteContactReject"),G={getContactsRequest:J,getContactsSuccess:T,getContactsReject:W,addContactRequest:X,addContactSuccess:P,addContactReject:$,deleteContactRequest:Q,deleteContactSuccess:V,deleteContactReject:Y,filterContacts:H},K=n(156),ee=n(152),te=n(151),ne=n(153),re=n(77),ae=n.n(re),ce=n(76),se=n.n(ce),oe=n(10),ue=Object(oe.a)({root:{fontSize:30}})(te.a),ie=Object(oe.a)({root:{backgroundColor:"#9ecaed",display:"flex",justifyContent:"space-between"}})(ee.a);var le=function(){var e=Object(l.b)(),t=Object(l.c)(Z.getIsLoggedIn);return Object(a.jsx)(K.a,{position:"static",children:Object(a.jsxs)(ie,{children:[Object(a.jsxs)(ue,{variant:"h1",noWrap:!0,children:[Object(a.jsx)(se.a,{}),"Phonebook"]}),t&&Object(a.jsx)(ne.a,{onClick:function(){e(B.logOut())},children:Object(a.jsx)(ae.a,{})})]})})};var be=function(e){var t=e.children;return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Contacts"}),t]})},je=n(21),pe=(n(121),n(39)),de=function(e,t){return-1===e.findIndex((function(e){return e.name.toLowerCase()===t.toLowerCase().trim()}))},fe=n(59),Oe=n(49),he=n.n(Oe);var me=function(){var e=Object(c.useState)(""),t=Object(je.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(""),o=Object(je.a)(s,2),u=o[0],i=o[1],b=Object(l.b)(),j=Object(l.c)(x);return Object(a.jsxs)("form",{onSubmit:function(e){console.log(e),de(j,n)?b(function(e,t){return function(){var n=Object(C.a)(g.a.mark((function n(r){var a,c;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(G.addContactRequest()),n.prev=1,a={name:e,number:t},n.next=5,F(a);case 5:c=n.sent,r(G.addContactSuccess(c.data)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),r(G.addContactReject(n.t0));case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}()}(n,u)):alert("".concat(n," is already in contacts"))},className:he.a.form,children:[Object(a.jsxs)("label",{htmlFor:"formName",children:["Name",Object(a.jsx)("input",{id:"formName",className:he.a.formName,type:"text",name:"name",placeholder:"Name",onChange:function(e){return r(e.target.value)}})]}),Object(a.jsxs)("label",{htmlFor:"formNumber",children:["Number",Object(a.jsx)(fe.a,{id:"formNumber",type:"tel",name:"number",placeholder:"Number",onChange:function(e){var t=Object(fe.b)(String(e));i(t)},onFocus:function(){}})]}),Object(a.jsx)("button",{type:"submit",className:he.a.btn,children:"Add contact"})]})},xe=n(24),ve=n.n(xe);var ge=function(e){var t=e.handler;return Object(a.jsx)("button",{className:ve.a.btn,onClick:t,children:"\u2718"})};var Ce=function(e){var t=e.info,n=e.onDeleteHandler;return Object(a.jsxs)("li",{className:ve.a.item,children:[Object(a.jsxs)("p",{className:ve.a.wrap,children:[Object(a.jsx)("span",{className:ve.a.name,children:t.name}),Object(a.jsx)("span",{className:ve.a.phone,children:t.number})]}),Object(a.jsx)(ge,{handler:n})]})};var we=function(){var e=Object(l.b)(),t=Object(l.c)(h);return t.length>0&&Object(a.jsx)("ul",{className:ve.a.list,children:t.map((function(t){var n=t.id,r=t.name,c=t.number;return Object(a.jsx)(Ce,{info:{name:r,number:c},onDeleteHandler:function(){return e(function(e){return function(){var t=Object(C.a)(g.a.mark((function t(n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(G.getContactsRequest()),t.prev=1,t.next=4,S(e);case 4:n(G.deleteContactSuccess(e)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),n(G.deleteContactReject(t.t0));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}(n))}},n)}))})},_e=n(56),ke=n.n(_e);var ye=function(){var e=Object(l.c)(m),t=Object(l.b)();return Object(a.jsx)("div",{className:ke.a.container,children:Object(a.jsxs)("label",{children:["Find Contacts by name",Object(a.jsx)("input",{type:"text",className:ke.a.input,value:e,onChange:function(e){return t(G.filterContacts(e.target.value))}})]})})},Ne=n(43),Fe=n(84),Se=n(155),Ie=n(154),Le=n(79),Re=n.n(Le);var Ue=function(e){var t=e.styles,n=Object(pe.a)(),r=n.register,c=n.handleSubmit,s=(n.errors,n.reset,Object(l.b)());return Object(a.jsxs)("form",{onSubmit:c((function(e){var t=e.userMail,n=e.password;s(B.logIn({email:t,password:n}))})),className:t,children:[Object(a.jsx)("label",{htmlFor:"userMail",children:"e-mail"}),Object(a.jsx)("input",{type:"mail",name:"userMail",id:"userMail",placeholder:"e-mail...",ref:r()}),Object(a.jsx)("label",{htmlFor:"password",children:"password"}),Object(a.jsx)("input",{type:"password",name:"password",placeholder:"password...",id:"password",ref:r()}),Object(a.jsx)("button",{className:Re.a.btn,type:"submit",children:"Log in"})]})},ze=n(80),Ae=n.n(ze);var qe=function(e){var t=e.styles,n=Object(pe.a)(),r=n.register,c=n.handleSubmit,s=n.errors,o=Object(l.b)();return Object(a.jsxs)("form",{className:t,onSubmit:c((function(e){var t=e.userName,n=e.userMail,r=e.password;o(B.register({name:t,email:n,password:r}))})),children:[Object(a.jsx)("label",{htmlFor:"userName",children:"User name"}),Object(a.jsx)("input",{type:"text",name:"userName",id:"userName",placeholder:"User name...",ref:r({required:!0,min:3})}),Object(a.jsxs)("label",{htmlFor:"userMail",children:["e-mail ",s.userMail&&console.log(s)]}),Object(a.jsx)("input",{type:"mail",name:"userMail",id:"userMail",placeholder:"e-mail...",ref:r({required:!0,pattern:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/i})}),Object(a.jsxs)("label",{htmlFor:"password",children:["Password ",s.password&&console.log(s)]}),Object(a.jsx)("input",{type:"password",name:"password",id:"password",placeholder:"password...",ref:r({required:!0,min:7})}),Object(a.jsx)("button",{className:Ae.a.btn,type:"submit",children:"Sing Up"})]})},Me=n(50),Be=n.n(Me);function Ze(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function Ee(e){var t=e.children,n=e.value,r=e.index,c=Object(Fe.a)(e,["children","value","index"]);return Object(a.jsx)("div",Object(Ne.a)(Object(Ne.a)({role:"tabpanel",hidden:n!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},c),{},{children:n===r&&t}))}var De=function(){var e=Object(c.useState)(0),t=Object(je.a)(e,2),n=t[0],r=t[1];return Object(a.jsxs)("div",{className:Be.a.wrapper,children:[Object(a.jsxs)(Se.a,{value:n,onChange:function(e,t){return r(t)},children:[Object(a.jsx)(Ie.a,Object(Ne.a)({label:"Authorization"},Ze(0))),Object(a.jsx)(Ie.a,Object(Ne.a)({label:"Registration"},Ze(1)))]}),Object(a.jsx)(Ee,{value:n,index:0,children:Object(a.jsx)(Ue,{styles:Be.a.form})}),Object(a.jsx)(Ee,{value:n,index:1,children:Object(a.jsx)(qe,{styles:Be.a.form})})]})};var He,Je,Te=function(){var e=Object(l.c)(x),t=(Object(l.c)(Z.getIsFetchingCurrent),Object(l.c)(Z.getIsLoggedIn)),n=Object(l.b)();return Object(c.useEffect)((function(){n(B.fetchCurrentUser())}),[n]),Object(c.useEffect)((function(){t&&n(function(){var e=Object(C.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(G.getContactsRequest()),e.prev=1,e.next=4,N();case 4:n=e.sent,t(G.getContactsSuccess(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(G.getContactsReject(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}),[n,t]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(le,{}),Object(a.jsx)("div",{className:p.a.container,children:t?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(me,{}),e.length>0?Object(a.jsxs)(be,{children:[Object(a.jsx)(ye,{}),Object(a.jsx)(we,{contacts:e})]}):Object(a.jsx)("p",{children:"Your phonebook is empty at this moment"})]}):Object(a.jsx)(De,{})})]})},We=n(12),Xe=n(81),Pe=n.n(Xe),$e=n(25),Qe=n(82),Ve=n.n(Qe),Ye=n(16),Ge=Object(w.d)([],(He={},Object(E.a)(He,T,(function(e,t){return t.payload})),Object(E.a)(He,P,(function(e,t){return[].concat(Object(We.a)(e),[t.payload])})),Object(E.a)(He,V,(function(e,t){return e.filter((function(e){return e.id!==t.payload}))})),He)),Ke=Object(w.d)("",Object(E.a)({},H,(function(e,t){return t.payload}))),et=Object(w.d)(!1,(Je={},Object(E.a)(Je,J,(function(){return!0})),Object(E.a)(Je,T,(function(){return!1})),Object(E.a)(Je,W,(function(){return!1})),Object(E.a)(Je,X,(function(){return!0})),Object(E.a)(Je,P,(function(){return!1})),Object(E.a)(Je,$,(function(){return!1})),Object(E.a)(Je,Q,(function(){return!0})),Object(E.a)(Je,V,(function(){return!1})),Object(E.a)(Je,Y,(function(){return!1})),Je)),tt=Object(Ye.c)({contacts:Ge,filter:Ke,isLoading:et}),nt=[].concat(Object(We.a)(Object(w.f)({serializableCheck:{ignoredActions:[$e.a,$e.f,$e.b,$e.c,$e.d,$e.e]}})),[Pe.a]),rt={key:"auth",storage:Ve.a,whitelist:["token"]},at=Object(w.a)({reducer:{phoneBook:tt,auth:Object($e.g)(rt,D)},devTools:!1,middleware:nt}),ct=Object($e.h)(at);u.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(l.a,{store:at,children:Object(a.jsx)(b.a,{loading:null,persistor:ct,children:Object(a.jsx)(i.a,{children:Object(a.jsx)(Te,{})})})})}),document.getElementById("root"))},24:function(e,t,n){e.exports={list:"ContactList_list__37Uwf",block:"ContactList_block__3TUU5",item:"ContactList_item__JIdX6",name:"ContactList_name__2Ueap",phone:"ContactList_phone__T28iI",wrap:"ContactList_wrap__1XOcF",btn:"ContactList_btn__2v5wf"}},49:function(e,t,n){e.exports={form:"ContactForm_form__30S35",input:"ContactForm_input__4kIz1",formName:"ContactForm_formName__E6pbC ContactForm_input__4kIz1",formNumber:"ContactForm_formNumber__4Qw8t ContactForm_input__4kIz1",btn:"ContactForm_btn__1ySx7"}},50:function(e,t,n){e.exports={wrapper:"UserForm_wrapper__2BdE_",form:"UserForm_form__X6uMx"}},56:function(e,t,n){e.exports={container:"Filter_container__1ri4c",input:"Filter_input__1cHnl"}},74:function(e,t,n){e.exports={container:"App_container__1yNWo"}},79:function(e,t,n){e.exports={btn:"AuthForm_btn__363dM"}},80:function(e,t,n){e.exports={btn:"RegistrationForm_btn__ve2DL"}}},[[125,1,2]]]);
//# sourceMappingURL=main.fd0cc1a8.chunk.js.map